!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./dist/",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={create:function(){var t=document,e=t.createDocumentFragment(),n=t.createElement("div"),r=this.zIndex||1e3;n.innerHTML='\n            <div class="toast-container"\n                style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: '+r+'; background-color: rgba(0,0,0,0.5); display: none">\n                <div class="toast-content-container"\n                    style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); -webkit-transform: translate(-50%, -50%);"\n                >\n                    <div id="toastContent" class="toast-content" style="padding: 4px 10px; -webkit-transition: -webkit-transform 500ms ease-out, opacity 500ms ease-out; transition: transform 500ms ease-out, opacity 500ms ease-out; background-color: #000; border-radius: 4px; color: #fff;"\n                    ></div>\n                </div>\n            </div>\n        ',this.toast=n.children[0],e.appendChild(this.toast),t.body.appendChild(e)},setZIndex:function(t){this.zIndex=t,this.toast&&(this.toast.style.zIndex=t)},show:function(t,e){var n=this;this.toast||this.create();var r=this.toast,o=r.ownerDocument,i=o.getElementById("toastContent");i.innerHTML="",i.appendChild(o.createTextNode(t)),this.playShowAnim(i),r.style.display="block",setTimeout(function(){return n.hide()},e||2e3)},playShowAnim:function(t){t.style.transform="translateY(-40px)",t.style.webkitTransform="translateY(-40px)",t.style.opacity=0,setTimeout(function(){t.style.transform="translateY(0px)",t.style.webkitTransform="translateY(0px)",t.style.opacity=1})},hide:function(){var t=this,e=this.toast.ownerDocument.getElementById("toastContent");this.playHideAnim(e);var n=function(){console.log("in after anim"),t.toast.style.display="none"};e.style.transition?this.addOnceEvent(e,"transitionend",n):e.style.webkitTransition?this.addOnceEvent(e,"webkitTransitionEnd",n):n()},addOnceEvent:function(t,e,n){var r=this,o=arguments;t.addEventListener(e,function i(){t.removeEventListener(e,i),n.apply(r,o)})},playHideAnim:function(t){t.style.transform="translateY(10px)",t.style.webkitTransform="translateY(10px)",t.style.opacity=0}};e.default=r}])},function(t,e){t.exports=class{constructor(t,e=!1){this.src=t,this.context=new(window.AudioContext||window.webkitAudioContext),this.loaded=!1,this.buffer=null,this.source=null,this.debugState=e,this.startedAt=0,this.offset=0,this.loopState=!1,this.listeners={},this.playing=!1,this.initSource()}initSource(){this.source=this.context.createBufferSource(),this.source.connect(this.context.destination);const t=Object.keys(this.listeners);t.length&&t.map(t=>{this.log(`Re-add event: ${t}`),this.source.addEventListener(t,this.listeners[t])})}clearSource(){this.source&&(this.playing&&this.source.stop(),this.source.disconnect(),this.initSource())}stop(){this.playing&&(this.clearSource(),this.startedAt=0,this.offset=0,this.playing=!1,this.log("Stopped."))}load(t){return t=t||this.src,this.log("Loading",t),this.loaded&&(this.clearSource(),this.loaded=!1),"string"!=typeof t?(this.fetcher=this.context.decodeAudioData(t).then(t=>{this.loaded=!0,this.buffer=t}),this):(this.fetcher=window.fetch(t,{method:"GET",mode:"no-cors"}).then(t=>t.arrayBuffer()).then(t=>this.context.decodeAudioData(t)).then(t=>{this.loaded=!0,this.buffer=t}),this)}getPlayTime(){return this.context.currentTime-this.startedAt+this.offset}play(t){if("suspended"!==this.context.state)return this.loaded?void(this.source.buffer||(this.source.buffer=this.buffer,this.source.loopEnd=this.buffer.duration,this.source.loop=this.loopState,this.startedAt=this.context.currentTime,this.source.start(0,t),this.playing=!0,this.source.addEventListener("ended",()=>this.stop()),this.log("Playing..."))):(this.log("Waiting for buffer to load..."),void this.fetcher.then(()=>this.play()));this.context.resume()}pause(){this.context.suspend(),this.playing=!1,this.log("Paused.")}loop(t){return this.loopState=t,this.log("Loop:",t?"ON":"OFF"),this.source.loop=t,this}toggleLoop(){return this.loopState=!this.loopState,this.log("Toggle loop:",this.loopState?"ON":"OFF"),this.source.loop=this.loopState,this}forward(t=5){this.log(`>> Forward ${t} seconds`);const e=this.getPlayTime();this.offset=e+t,this.offset>this.buffer.duration&&(this.offset=this.buffer.duration-t),this.log("Play @",this.offset),this.clearSource(),this.play(this.offset)}rewind(t=5){this.log(`<< Rewind ${t} seconds`);const e=this.getPlayTime();this.offset=e-t,this.offset<0&&(this.offset=0),this.log("Play @",this.offset),this.clearSource(),this.play(this.offset)}useKeyboard(t){this.log("Using keyboard.");let e=document.body;return t&&(e=document.querySelector(t)),e.addEventListener("keydown",({key:t})=>{const e={ArrowRight:()=>this.forward(),ArrowLeft:()=>this.rewind(),z:()=>this.stop(),x:()=>this.play(),c:()=>this.pause(),l:()=>this.toggleLoop()}[t];e&&e()}),this}on(t,e){return this.source.addEventListener(t,e),this.listeners[t]=e,this}debug(t){return this.debugState=t,this}log(){this.debugState&&console.log("Player:",...arguments)}}},function(t,e,n){t.exports=function(t,e){if("string"==typeof t){var n=t;if(!(t=window.document.querySelector(t)))throw new Error('"'+n+'" does not match any HTML elements')}if(!t)throw new Error('"'+t+'" is not a valid HTML element');"function"==typeof e&&(e={onDrop:e});var s;return t.addEventListener("dragenter",a,!1),t.addEventListener("dragover",u,!1),t.addEventListener("dragleave",c,!1),t.addEventListener("drop",l,!1),function(){f(),t.removeEventListener("dragenter",a,!1),t.removeEventListener("dragover",u,!1),t.removeEventListener("dragleave",c,!1),t.removeEventListener("drop",l,!1)};function a(t){return e.onDragEnter&&e.onDragEnter(t),t.stopPropagation(),t.preventDefault(),!1}function u(n){if(n.stopPropagation(),n.preventDefault(),e.onDragOver&&e.onDragOver(n),n.dataTransfer.items){var r=Array.from(n.dataTransfer.items),o=r.filter(function(t){return"file"===t.kind}),i=r.filter(function(t){return"string"===t.kind});if(0===o.length&&!e.onDropText)return;if(0===i.length&&!e.onDrop)return;if(0===o.length&&0===i.length)return}return t.classList.add("drag"),clearTimeout(s),n.dataTransfer.dropEffect="copy",!1}function c(t){return t.stopPropagation(),t.preventDefault(),e.onDragLeave&&e.onDragLeave(t),clearTimeout(s),s=setTimeout(f,50),!1}function l(t){t.stopPropagation(),t.preventDefault(),e.onDragLeave&&e.onDragLeave(t),clearTimeout(s),f();var n={x:t.clientX,y:t.clientY},a=t.dataTransfer.getData("text");if(a&&e.onDropText&&e.onDropText(a,n),e.onDrop&&t.dataTransfer.items){var u=t.dataTransfer.files,c=Array.from(t.dataTransfer.items).filter(function(t){return"file"===t.kind});if(0===c.length)return;o(c.map(function(t){return function(e){!function(t,e){var n=[];if(t.isFile)t.file(function(n){n.fullPath=t.fullPath,n.isFile=!0,n.isDirectory=!1,e(null,n)},function(t){e(t)});else if(t.isDirectory){var r=t.createReader();!function s(){r.readEntries(function(r){r.length>0?(n=n.concat(Array.from(r)),s()):o(n.map(function(t){return function(e){i(t,e)}}),function(n,r){n?e(n):(r.push({fullPath:t.fullPath,name:t.name,isFile:!1,isDirectory:!0}),e(null,r))})})}()}}(t.webkitGetAsEntry(),e)}}),function(t,o){if(t)throw t;var i=r(o),s=i.filter(function(t){return t.isFile}),a=i.filter(function(t){return t.isDirectory});e.onDrop(s,n,u,a)})}return!1}function f(){t.classList.remove("drag")}};var r=n(4),o=n(5);function i(t,e){var n=[];if(t.isFile){t.file(function(n){n.fullPath=t.fullPath;n.isFile=true;n.isDirectory=false;e(null,n)},function(t){e(t)})}else if(t.isDirectory){var r=t.createReader();s()}function s(){r.readEntries(function(t){if(t.length>0){n=n.concat(Array.from(t));s()}else{a()}})}function a(){o(n.map(function(t){return function(e){i(t,e)}}),function(n,r){if(n){e(n)}else{r.push({fullPath:t.fullPath,name:t.name,isFile:false,isDirectory:true});e(null,r)}})}}},function(t,e,n){"use strict";n.r(e);var r=n(1),o=n.n(r),i=n(2),s=n.n(i),a=n(0),u=n.n(a);const c=new o.a("https://play-spectrum.herokuapp.com/deploy.mp3");c.debug(!0).useKeyboard().load().play(),u.a.show("Drop an audio file to start playing!"),s()("body",function(t){const e=t[0];console.log("GOT FILE:",e);const n=new window.FileReader;n.addEventListener("load",t=>{const n=t.target.result;c.load(n).play(),u.a.show(`Playing ${e.name}...`)}),n.addEventListener("error",t=>{console.error("FileReader error"+t),u.a.show("Oops! Something went wrong :(")}),n.readAsArrayBuffer(e)})},function(t,e){t.exports=function(t,e){return(e="number"==typeof e?e:1/0)?function t(n,r){return n.reduce(function(n,o){return Array.isArray(o)&&r<e?n.concat(t(o,r+1)):n.concat(o)},[])}(t,1):Array.isArray(t)?t.map(function(t){return t}):t}},function(t,e,n){(function(e){t.exports=function(t,n){var r,o,i,s=!0;Array.isArray(t)?(r=[],o=t.length):(i=Object.keys(t),r={},o=i.length);function a(t){function o(){n&&n(t,r),n=null}s?e.nextTick(o):o()}function u(t,e,n){r[t]=n,(0==--o||e)&&a(e)}o?i?i.forEach(function(e){t[e](function(t,n){u(e,t,n)})}):t.forEach(function(t,e){t(function(t,n){u(e,t,n)})}):a(null);s=!1}}).call(this,n(6))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var t=a(d);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2pzLXNpbXBsZS10b2FzdC9kaXN0L3NpbXBsZVRvYXN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy91cGxheWVyL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kcmFnLWRyb3AvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9mbGF0dGVuL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ydW4tcGFyYWxsZWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIndpbmRvdyIsImUiLCJjb25maWd1cmFibGUiLCJkZWZhdWx0IiwiZG9jdW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY3JlYXRlRWxlbWVudCIsInRoaXMiLCJ6SW5kZXgiLCJpbm5lckhUTUwiLCJ0b2FzdCIsImNoaWxkcmVuIiwiYXBwZW5kQ2hpbGQiLCJib2R5Iiwic2V0WkluZGV4Iiwic3R5bGUiLCJzaG93Iiwib3duZXJEb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY3JlYXRlVGV4dE5vZGUiLCJwbGF5U2hvd0FuaW0iLCJkaXNwbGF5Iiwic2V0VGltZW91dCIsImhpZGUiLCJ0cmFuc2Zvcm0iLCJ3ZWJraXRUcmFuc2Zvcm0iLCJvcGFjaXR5IiwicGxheUhpZGVBbmltIiwiY29uc29sZSIsImxvZyIsInRyYW5zaXRpb24iLCJhZGRPbmNlRXZlbnQiLCJ3ZWJraXRUcmFuc2l0aW9uIiwiYXJndW1lbnRzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhcHBseSIsIltvYmplY3QgT2JqZWN0XSIsInNyYyIsImRlYnVnU3RhdGUiLCJjb250ZXh0IiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwibG9hZGVkIiwiYnVmZmVyIiwic291cmNlIiwic3RhcnRlZEF0Iiwib2Zmc2V0IiwibG9vcFN0YXRlIiwibGlzdGVuZXJzIiwicGxheWluZyIsImluaXRTb3VyY2UiLCJjcmVhdGVCdWZmZXJTb3VyY2UiLCJjb25uZWN0IiwiZGVzdGluYXRpb24iLCJldmVudHMiLCJrZXlzIiwibGVuZ3RoIiwibWFwIiwiZXZlbnROYW1lIiwic3RvcCIsImRpc2Nvbm5lY3QiLCJjbGVhclNvdXJjZSIsImZldGNoZXIiLCJkZWNvZGVBdWRpb0RhdGEiLCJ0aGVuIiwiYXVkaW9CdWZmZXIiLCJmZXRjaCIsIm1ldGhvZCIsInJlc3BvbnNlIiwiYXJyYXlCdWZmZXIiLCJjdXJyZW50VGltZSIsInN0YXRlIiwibG9vcEVuZCIsImR1cmF0aW9uIiwibG9vcCIsInN0YXJ0IiwicGxheSIsInJlc3VtZSIsInN1c3BlbmQiLCJzZWNvbmRzIiwicGxheVRpbWUiLCJnZXRQbGF5VGltZSIsInNlbGVjdG9yIiwiJGVsIiwicXVlcnlTZWxlY3RvciIsIkFycm93UmlnaHQiLCJmb3J3YXJkIiwiQXJyb3dMZWZ0IiwicmV3aW5kIiwieiIsIngiLCJwYXVzZSIsInRvZ2dsZUxvb3AiLCJjYWxsYmFjayIsImVsZW0iLCJFcnJvciIsIm9uRHJvcCIsInRpbWVvdXQiLCJvbkRyYWdFbnRlciIsIm9uRHJhZ092ZXIiLCJvbkRyYWdMZWF2ZSIsInJlbW92ZURyYWdDbGFzcyIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiZGF0YVRyYW5zZmVyIiwiaXRlbXMiLCJBcnJheSIsImZyb20iLCJmaWxlSXRlbXMiLCJmaWx0ZXIiLCJpdGVtIiwia2luZCIsInRleHRJdGVtcyIsIm9uRHJvcFRleHQiLCJjbGFzc0xpc3QiLCJhZGQiLCJjbGVhclRpbWVvdXQiLCJkcm9wRWZmZWN0IiwicG9zIiwiY2xpZW50WCIsInkiLCJjbGllbnRZIiwidGV4dCIsImdldERhdGEiLCJmaWxlTGlzdCIsImZpbGVzIiwicGFyYWxsZWwiLCJjYiIsImVudHJ5IiwiZW50cmllcyIsImlzRmlsZSIsImZpbGUiLCJmdWxsUGF0aCIsImlzRGlyZWN0b3J5IiwiZXJyIiwicmVhZGVyIiwiY3JlYXRlUmVhZGVyIiwicmVhZEVudHJpZXMiLCJlbnRyaWVzXyIsImNvbmNhdCIsInByb2Nlc3NFbnRyeSIsInJlc3VsdHMiLCJwdXNoIiwid2Via2l0R2V0QXNFbnRyeSIsImZsYXR0ZW4iLCJkaXJlY3RvcmllcyIsInJlbW92ZSIsImRvbmVFbnRyaWVzIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsInVwbGF5ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsInVwbGF5ZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0IiwiZHJhZ19kcm9wX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJkcmFnX2Ryb3BfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0IiwianNfc2ltcGxlX3RvYXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18iLCJqc19zaW1wbGVfdG9hc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0IiwicGxheWVyIiwiYSIsImRlYnVnIiwidXNlS2V5Ym9hcmQiLCJsb2FkIiwiRmlsZVJlYWRlciIsImRhdGEiLCJ0YXJnZXQiLCJyZXN1bHQiLCJlcnJvciIsInJlYWRBc0FycmF5QnVmZmVyIiwibGlzdCIsImRlcHRoIiwiSW5maW5pdHkiLCJfZmxhdHRlbiIsInJlZHVjZSIsImFjYyIsImlzQXJyYXkiLCJwcm9jZXNzIiwidGFza3MiLCJwZW5kaW5nIiwiaXNTeW5jIiwiZG9uZSIsImVuZCIsIm5leHRUaWNrIiwiZWFjaCIsImZvckVhY2giLCJ0YXNrIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwiZHJhaW5pbmciLCJxdWV1ZUluZGV4IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5RdWV1ZSIsImxlbiIsInJ1biIsIm1hcmtlciIsInJ1bkNsZWFyVGltZW91dCIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJhcmdzIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkExQixFQUFBa0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFyQixFQUFBVSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdBQWdILE9BQUFOLEVBQUFNLElBQXFCQyxLQUFBLEtBQUFELElBQ3JJLE9BQUFGLEdBSUF6QixFQUFBNkIsRUFBQSxTQUFBMUIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBcUIsV0FDQSxXQUEyQixPQUFBckIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQWlCLEVBQUFDLEdBQXNELE9BQUFqQixPQUFBa0IsVUFBQUMsZUFBQTFCLEtBQUF1QixFQUFBQyxJQUd0RC9CLEVBQUFrQyxFQUFBLEdBSUFsQyxJQUFBbUMsRUFBQSxxQkNsRjBNQyxPQUExSWpDLEVBQUFELFFBQTZKLFNBQUFvQixHQUFtQixJQUFBZSxFQUFBLEdBQVMsU0FBQVIsRUFBQWhCLEdBQWMsR0FBQXdCLEVBQUF4QixHQUFBLE9BQUF3QixFQUFBeEIsR0FBQVgsUUFBNEIsSUFBQUUsRUFBQWlDLEVBQUF4QixHQUFBLENBQVlULEVBQUFTLEVBQUFSLEdBQUEsRUFBQUgsUUFBQSxJQUFxQixPQUFBb0IsRUFBQVQsR0FBQU4sS0FBQUgsRUFBQUYsUUFBQUUsSUFBQUYsUUFBQTJCLEdBQUF6QixFQUFBQyxHQUFBLEVBQUFELEVBQUFGLFFBQTJELE9BQUEyQixFQUFBckIsRUFBQWMsRUFBQU8sRUFBQXBCLEVBQUE0QixFQUFBUixFQUFBbkIsRUFBQSxTQUFBWSxFQUFBZSxFQUFBeEIsR0FBdUNnQixFQUFBaEIsRUFBQVMsRUFBQWUsSUFBQXZCLE9BQUFDLGVBQUFPLEVBQUFlLEVBQUEsQ0FBcUNDLGNBQUEsRUFBQXRCLFlBQUEsRUFBQUMsSUFBQUosS0FBc0NnQixFQUFBWCxFQUFBLFNBQUFJLEdBQWlCUixPQUFBQyxlQUFBTyxFQUFBLGNBQXNDRCxPQUFBLEtBQVdRLElBQUEsU0FBQVAsR0FBaUIsSUFBQWUsRUFBQWYsS0FBQUUsV0FBQSxXQUFpQyxPQUFBRixFQUFBaUIsU0FBaUIsV0FBWSxPQUFBakIsR0FBVSxPQUFBTyxFQUFBbkIsRUFBQTJCLEVBQUEsSUFBQUEsTUFBc0JSLEVBQUFoQixFQUFBLFNBQUFTLEVBQUFlLEdBQW1CLE9BQUF2QixPQUFBa0IsVUFBQUMsZUFBQTFCLEtBQUFlLEVBQUFlLElBQWlEUixFQUFBSyxFQUFBLFVBQUFMLElBQUFNLEVBQUEsR0FBemdCLENBQWlpQixVQUFBYixFQUFBZSxFQUFBUixHQUFrQixhQUFhZixPQUFBQyxlQUFBc0IsRUFBQSxjQUFzQ2hCLE9BQUEsSUFBVyxJQUFBUixFQUFBLENBQU9hLE9BQUEsV0FBa0IsSUFBQUosRUFBQWtCLFNBQUFILEVBQUFmLEVBQUFtQix5QkFBQVosRUFBQVAsRUFBQW9CLGNBQUEsT0FBQTdCLEVBQUE4QixLQUFBQyxRQUFBLElBQXdGZixFQUFBZ0IsVUFBQSw0SUFBNEloQyxFQUFBLHVvQkFBK2pCOEIsS0FBQUcsTUFBQWpCLEVBQUFrQixTQUFBLEdBQUFWLEVBQUFXLFlBQUFMLEtBQUFHLE9BQUF4QixFQUFBMkIsS0FBQUQsWUFBQVgsSUFBK0phLFVBQUEsU0FBQTVCLEdBQXVCcUIsS0FBQUMsT0FBQXRCLEVBQUFxQixLQUFBRyxRQUFBSCxLQUFBRyxNQUFBSyxNQUFBUCxPQUFBdEIsSUFBc0Q4QixLQUFBLFNBQUE5QixFQUFBZSxHQUFvQixJQUFBUixFQUFBYyxLQUFXQSxLQUFBRyxPQUFBSCxLQUFBakIsU0FBMEIsSUFBQWIsRUFBQThCLEtBQUFHLE1BQUExQyxFQUFBUyxFQUFBd0MsY0FBQWxCLEVBQUEvQixFQUFBa0QsZUFBQSxnQkFBc0VuQixFQUFBVSxVQUFBLEdBQUFWLEVBQUFhLFlBQUE1QyxFQUFBbUQsZUFBQWpDLElBQUFxQixLQUFBYSxhQUFBckIsR0FBQXRCLEVBQUFzQyxNQUFBTSxRQUFBLFFBQUFDLFdBQUEsV0FBcUgsT0FBQTdCLEVBQUE4QixRQUFnQnRCLEdBQUEsTUFBU21CLGFBQUEsU0FBQWxDLEdBQTBCQSxFQUFBNkIsTUFBQVMsVUFBQSxvQkFBQXRDLEVBQUE2QixNQUFBVSxnQkFBQSxvQkFBQXZDLEVBQUE2QixNQUFBVyxRQUFBLEVBQUFKLFdBQUEsV0FBMEhwQyxFQUFBNkIsTUFBQVMsVUFBQSxrQkFBQXRDLEVBQUE2QixNQUFBVSxnQkFBQSxrQkFBQXZDLEVBQUE2QixNQUFBVyxRQUFBLEtBQWtHSCxLQUFBLFdBQWlCLElBQUFyQyxFQUFBcUIsS0FBQU4sRUFBQU0sS0FBQUcsTUFBQU8sY0FBQUMsZUFBQSxnQkFBcUVYLEtBQUFvQixhQUFBMUIsR0FBcUIsSUFBQVIsRUFBQSxXQUFpQm1DLFFBQUFDLElBQUEsaUJBQUEzQyxFQUFBd0IsTUFBQUssTUFBQU0sUUFBQSxRQUEyRHBCLEVBQUFjLE1BQUFlLFdBQUF2QixLQUFBd0IsYUFBQTlCLEVBQUEsZ0JBQUFSLEdBQUFRLEVBQUFjLE1BQUFpQixpQkFBQXpCLEtBQUF3QixhQUFBOUIsRUFBQSxzQkFBQVIsUUFBb0lzQyxhQUFBLFNBQUE3QyxFQUFBZSxFQUFBUixHQUE4QixJQUFBaEIsRUFBQThCLEtBQUF2QyxFQUFBaUUsVUFBdUIvQyxFQUFBZ0QsaUJBQUFqQyxFQUFBLFNBQUFGLElBQWtDYixFQUFBaUQsb0JBQUFsQyxFQUFBRixHQUFBTixFQUFBMkMsTUFBQTNELEVBQUFULE1BQTBDMkQsYUFBQSxTQUFBekMsR0FBMEJBLEVBQUE2QixNQUFBUyxVQUFBLG1CQUFBdEMsRUFBQTZCLE1BQUFVLGdCQUFBLG1CQUFBdkMsRUFBQTZCLE1BQUFXLFFBQUEsSUFBb0d6QixFQUFBRSxRQUFBMUIsb0JDQW43RlYsRUFBQUQsUUFBQSxNQUNBdUUsWUFBQUMsRUFBQUMsR0FBQSxHQUNBaEMsS0FBQStCLE1BQ0EvQixLQUFBaUMsUUFBQSxJQUFBeEMsT0FBQXlDLGNBQUF6QyxPQUFBMEMsb0JBQ0FuQyxLQUFBb0MsUUFBQSxFQUNBcEMsS0FBQXFDLE9BQUEsS0FDQXJDLEtBQUFzQyxPQUFBLEtBQ0F0QyxLQUFBZ0MsYUFDQWhDLEtBQUF1QyxVQUFBLEVBQ0F2QyxLQUFBd0MsT0FBQSxFQUNBeEMsS0FBQXlDLFdBQUEsRUFDQXpDLEtBQUEwQyxVQUFBLEdBQ0ExQyxLQUFBMkMsU0FBQSxFQUVBM0MsS0FBQTRDLGFBR0FkLGFBQ0E5QixLQUFBc0MsT0FBQXRDLEtBQUFpQyxRQUFBWSxxQkFDQTdDLEtBQUFzQyxPQUFBUSxRQUFBOUMsS0FBQWlDLFFBQUFjLGFBR0EsTUFBQUMsRUFBQTdFLE9BQUE4RSxLQUFBakQsS0FBQTBDLFdBQ0FNLEVBQUFFLFFBQ0FGLEVBQUFHLElBQUFDLElBQ0FwRCxLQUFBc0IscUJBQWdDOEIsS0FDaENwRCxLQUFBc0MsT0FBQVgsaUJBQUF5QixFQUFBcEQsS0FBQTBDLFVBQUFVLE1BSUF0QixjQUNBOUIsS0FBQXNDLFNBQ0F0QyxLQUFBMkMsU0FBQTNDLEtBQUFzQyxPQUFBZSxPQUNBckQsS0FBQXNDLE9BQUFnQixhQUNBdEQsS0FBQTRDLGNBR0FkLE9BQ0E5QixLQUFBMkMsVUFDQTNDLEtBQUF1RCxjQUNBdkQsS0FBQXVDLFVBQUEsRUFDQXZDLEtBQUF3QyxPQUFBLEVBQ0F4QyxLQUFBMkMsU0FBQSxFQUNBM0MsS0FBQXNCLElBQUEsYUFHQVEsS0FBQUMsR0FRQSxPQVBBQSxLQUFBL0IsS0FBQStCLElBQ0EvQixLQUFBc0IsSUFBQSxVQUFBUyxHQUNBL0IsS0FBQW9DLFNBQ0FwQyxLQUFBdUQsY0FDQXZELEtBQUFvQyxRQUFBLEdBR0EsaUJBQUFMLEdBQ0EvQixLQUFBd0QsUUFBQXhELEtBQUFpQyxRQUFBd0IsZ0JBQUExQixHQUFBMkIsS0FBQUMsSUFDQTNELEtBQUFvQyxRQUFBLEVBQ0FwQyxLQUFBcUMsT0FBQXNCLElBRUEzRCxPQUdBQSxLQUFBd0QsUUFBQS9ELE9BQ0FtRSxNQUFBN0IsRUFBQSxDQUFtQjhCLE9BQUEsTUFBQWpGLEtBQUEsWUFDbkI4RSxLQUFBSSxLQUFBQyxlQUNBTCxLQUFBSyxHQUFBL0QsS0FBQWlDLFFBQUF3QixnQkFBQU0sSUFDQUwsS0FBQUMsSUFDQTNELEtBQUFvQyxRQUFBLEVBQ0FwQyxLQUFBcUMsT0FBQXNCLElBRUEzRCxNQUdBOEIsY0FDQSxPQUFBOUIsS0FBQWlDLFFBQUErQixZQUFBaEUsS0FBQXVDLFVBQUF2QyxLQUFBd0MsT0FHQVYsS0FBQVUsR0FDQSxpQkFBQXhDLEtBQUFpQyxRQUFBZ0MsTUFLQSxPQUFBakUsS0FBQW9DLFlBTUFwQyxLQUFBc0MsT0FBQUQsU0FFQXJDLEtBQUFzQyxPQUFBRCxPQUFBckMsS0FBQXFDLE9BQ0FyQyxLQUFBc0MsT0FBQTRCLFFBQUFsRSxLQUFBcUMsT0FBQThCLFNBQ0FuRSxLQUFBc0MsT0FBQThCLEtBQUFwRSxLQUFBeUMsVUFDQXpDLEtBQUF1QyxVQUFBdkMsS0FBQWlDLFFBQUErQixZQUNBaEUsS0FBQXNDLE9BQUErQixNQUFBLEVBQUE3QixHQUNBeEMsS0FBQTJDLFNBQUEsRUFDQTNDLEtBQUFzQyxPQUFBWCxpQkFBQSxZQUFBM0IsS0FBQXFELFFBQ0FyRCxLQUFBc0IsSUFBQSxpQkFkQXRCLEtBQUFzQixJQUFBLHNDQUNBdEIsS0FBQXdELFFBQUFFLEtBQUEsSUFBQTFELEtBQUFzRSxTQU5BdEUsS0FBQWlDLFFBQUFzQyxTQXNCQXpDLFFBQ0E5QixLQUFBaUMsUUFBQXVDLFVBQ0F4RSxLQUFBMkMsU0FBQSxFQUNBM0MsS0FBQXNCLElBQUEsV0FHQVEsS0FBQVcsR0FJQSxPQUhBekMsS0FBQXlDLFlBQ0F6QyxLQUFBc0IsSUFBQSxRQUFBbUIsRUFBQSxZQUNBekMsS0FBQXNDLE9BQUE4QixLQUFBM0IsRUFDQXpDLEtBR0E4QixhQUlBLE9BSEE5QixLQUFBeUMsV0FBQXpDLEtBQUF5QyxVQUNBekMsS0FBQXNCLElBQUEsZUFBQXRCLEtBQUF5QyxVQUFBLFlBQ0F6QyxLQUFBc0MsT0FBQThCLEtBQUFwRSxLQUFBeUMsVUFDQXpDLEtBR0E4QixRQUFBMkMsRUFBQSxHQUNBekUsS0FBQXNCLGtCQUEyQm1ELGFBQzNCLE1BQUFDLEVBQUExRSxLQUFBMkUsY0FDQTNFLEtBQUF3QyxPQUFBa0MsRUFBQUQsRUFDQXpFLEtBQUF3QyxPQUFBeEMsS0FBQXFDLE9BQUE4QixXQUFBbkUsS0FBQXdDLE9BQUF4QyxLQUFBcUMsT0FBQThCLFNBQUFNLEdBQ0F6RSxLQUFBc0IsSUFBQSxTQUFBdEIsS0FBQXdDLFFBQ0F4QyxLQUFBdUQsY0FDQXZELEtBQUFzRSxLQUFBdEUsS0FBQXdDLFFBR0FWLE9BQUEyQyxFQUFBLEdBQ0F6RSxLQUFBc0IsaUJBQTBCbUQsYUFDMUIsTUFBQUMsRUFBQTFFLEtBQUEyRSxjQUNBM0UsS0FBQXdDLE9BQUFrQyxFQUFBRCxFQUNBekUsS0FBQXdDLE9BQUEsSUFBQXhDLEtBQUF3QyxPQUFBLEdBQ0F4QyxLQUFBc0IsSUFBQSxTQUFBdEIsS0FBQXdDLFFBQ0F4QyxLQUFBdUQsY0FDQXZELEtBQUFzRSxLQUFBdEUsS0FBQXdDLFFBR0FWLFlBQUE4QyxHQUNBNUUsS0FBQXNCLElBQUEsbUJBQ0EsSUFBQXVELEVBQUFoRixTQUFBUyxLQWVBLE9BZEFzRSxJQUFBQyxFQUFBaEYsU0FBQWlGLGNBQUFGLElBQ0FDLEVBQUFsRCxpQkFBQSxZQUFzQzNDLFVBQ3RDLE1BU0E2RSxFQVRBLENBQ0FrQixXQUFBLElBQUEvRSxLQUFBZ0YsVUFDQUMsVUFBQSxJQUFBakYsS0FBQWtGLFNBQ0FDLEVBQUEsSUFBQW5GLEtBQUFxRCxPQUNBK0IsRUFBQSxJQUFBcEYsS0FBQXNFLE9BQ0F4RyxFQUFBLElBQUFrQyxLQUFBcUYsUUFDQTNILEVBQUEsSUFBQXNDLEtBQUFzRixjQUdBdEcsR0FDQTZFLFNBRUE3RCxLQUdBOEIsR0FBQXNCLEVBQUFtQyxHQUdBLE9BRkF2RixLQUFBc0MsT0FBQVgsaUJBQUF5QixFQUFBbUMsR0FDQXZGLEtBQUEwQyxVQUFBVSxHQUFBbUMsRUFDQXZGLEtBR0E4QixNQUFBRSxHQUVBLE9BREFoQyxLQUFBZ0MsYUFDQWhDLEtBR0E4QixNQUNBOUIsS0FBQWdDLFlBQ0FYLFFBQUFDLElBQUEsYUFBQUksOEJDOUtBbEUsRUFBQUQsUUFLQSxTQUFBaUksRUFBQTlDLEdBQ0Esb0JBQUE4QyxFQUFBLENBQ0EsSUFBQVosRUFBQVksRUFFQSxLQURBQSxFQUFBL0YsT0FBQUksU0FBQWlGLGNBQUFVLElBRUEsVUFBQUMsTUFBQSxJQUFBYixFQUFBLHNDQUlBLElBQUFZLEVBQ0EsVUFBQUMsTUFBQSxJQUFBRCxFQUFBLGlDQUdBLG1CQUFBOUMsSUFDQUEsRUFBQSxDQUFpQmdELE9BQUFoRCxJQUdqQixJQUFBaUQsRUFRQSxPQU5BSCxFQUFBN0QsaUJBQUEsWUFBQWlFLEdBQUEsR0FDQUosRUFBQTdELGlCQUFBLFdBQUFrRSxHQUFBLEdBQ0FMLEVBQUE3RCxpQkFBQSxZQUFBbUUsR0FBQSxHQUNBTixFQUFBN0QsaUJBQUEsT0FBQStELEdBQUEsR0FHQSxXQUNBSyxJQUNBUCxFQUFBNUQsb0JBQUEsWUFBQWdFLEdBQUEsR0FDQUosRUFBQTVELG9CQUFBLFdBQUFpRSxHQUFBLEdBQ0FMLEVBQUE1RCxvQkFBQSxZQUFBa0UsR0FBQSxHQUNBTixFQUFBNUQsb0JBQUEsT0FBQThELEdBQUEsSUFHQSxTQUFBRSxFQUFBbEcsR0FRQSxPQVBBZ0QsRUFBQWtELGFBQ0FsRCxFQUFBa0QsWUFBQWxHLEdBSUFBLEVBQUFzRyxrQkFDQXRHLEVBQUF1RyxrQkFDQSxFQUdBLFNBQUFKLEVBQUFuRyxHQVFBLEdBUEFBLEVBQUFzRyxrQkFDQXRHLEVBQUF1RyxpQkFFQXZELEVBQUFtRCxZQUNBbkQsRUFBQW1ELFdBQUFuRyxHQUdBQSxFQUFBd0csYUFBQUMsTUFBQSxDQUdBLElBQUFBLEVBQUFDLE1BQUFDLEtBQUEzRyxFQUFBd0csYUFBQUMsT0FDQUcsRUFBQUgsRUFBQUksT0FBQSxTQUFBQyxHQUNBLGVBQUFBLEVBQUFDLE9BRUFDLEVBQUFQLEVBQUFJLE9BQUEsU0FBQUMsR0FDQSxpQkFBQUEsRUFBQUMsT0FHQSxPQUFBSCxFQUFBcEQsU0FBQVIsRUFBQWlFLFdBQUEsT0FDQSxPQUFBRCxFQUFBeEQsU0FBQVIsRUFBQWdELE9BQUEsT0FDQSxPQUFBWSxFQUFBcEQsUUFBQSxJQUFBd0QsRUFBQXhELE9BQUEsT0FRQSxPQUxBc0MsRUFBQW9CLFVBQUFDLElBQUEsUUFDQUMsYUFBQW5CLEdBRUFqRyxFQUFBd0csYUFBQWEsV0FBQSxRQUVBLEVBR0EsU0FBQWpCLEVBQUFwRyxHQVdBLE9BVkFBLEVBQUFzRyxrQkFDQXRHLEVBQUF1RyxpQkFFQXZELEVBQUFvRCxhQUNBcEQsRUFBQW9ELFlBQUFwRyxHQUdBb0gsYUFBQW5CLEdBQ0FBLEVBQUE1RSxXQUFBZ0YsRUFBQSxLQUVBLEVBR0EsU0FBQUwsRUFBQWhHLEdBQ0FBLEVBQUFzRyxrQkFDQXRHLEVBQUF1RyxpQkFFQXZELEVBQUFvRCxhQUNBcEQsRUFBQW9ELFlBQUFwRyxHQUdBb0gsYUFBQW5CLEdBQ0FJLElBRUEsSUFBQWlCLEVBQUEsQ0FDQTVCLEVBQUExRixFQUFBdUgsUUFDQUMsRUFBQXhILEVBQUF5SCxTQUlBQyxFQUFBMUgsRUFBQXdHLGFBQUFtQixRQUFBLFFBU0EsR0FSQUQsR0FBQTFFLEVBQUFpRSxZQUNBakUsRUFBQWlFLFdBQUFTLEVBQUFKLEdBT0F0RSxFQUFBZ0QsUUFBQWhHLEVBQUF3RyxhQUFBQyxNQUFBLENBQ0EsSUFBQW1CLEVBQUE1SCxFQUFBd0csYUFBQXFCLE1BR0FwQixFQUFBQyxNQUFBQyxLQUFBM0csRUFBQXdHLGFBQUFDLE9BQUFJLE9BQUEsU0FBQUMsR0FDQSxlQUFBQSxFQUFBQyxPQUdBLE9BQUFOLEVBQUFqRCxPQUFBLE9BRUFzRSxFQUNBckIsRUFBQWhELElBQUEsU0FBQXFELEdBQ0EsZ0JBQUFpQixJQWdDQSxTQUFBQyxFQUFBRCxHQUNBLElBQUFFLEVBQUEsR0FFQSxHQUFBRCxFQUFBRSxPQUNBRixFQUFBRyxLQUNBLFNBQUFBLEdBQ0FBLEVBQUFDLFNBQUFKLEVBQUFJLFNBQ0FELEVBQUFELFFBQUEsRUFDQUMsRUFBQUUsYUFBQSxFQUNBTixFQUFBLEtBQUFJLElBRUEsU0FBQUcsR0FDQVAsRUFBQU8sVUFHRyxHQUFBTixFQUFBSyxZQUFBLENBQ0gsSUFBQUUsRUFBQVAsRUFBQVEsZ0JBSUEsU0FBQUMsSUFDQUYsRUFBQUUsWUFBQSxTQUFBQyxHQUNBQSxFQUFBbEYsT0FBQSxHQUNBeUUsSUFBQVUsT0FBQWpDLE1BQUFDLEtBQUErQixJQUNBRCxLQVFBWCxFQUNBRyxFQUFBeEUsSUFBQSxTQUFBdUUsR0FDQSxnQkFBQUQsR0FDQWEsRUFBQVosRUFBQUQsTUFHQSxTQUFBTyxFQUFBTyxHQUNBUCxFQUNBUCxFQUFBTyxJQUVBTyxFQUFBQyxLQUFBLENBQ0FWLFNBQUFKLEVBQUFJLFNBQ0E5SixLQUFBMEosRUFBQTFKLEtBQ0E0SixRQUFBLEVBQ0FHLGFBQUEsSUFFQU4sRUFBQSxLQUFBYyxRQS9CQUosSUFoREFHLENBQUE5QixFQUFBaUMsbUJBQUFoQixNQUdBLFNBQUFPLEVBQUFPLEdBR0EsR0FBQVAsRUFBQSxNQUFBQSxFQUVBLElBQUFMLEVBQUFlLEVBQUFILEdBRUFoQixFQUFBSSxFQUFBcEIsT0FBQSxTQUFBQyxHQUNBLE9BQUFBLEVBQUFvQixTQUdBZSxFQUFBaEIsRUFBQXBCLE9BQUEsU0FBQUMsR0FDQSxPQUFBQSxFQUFBdUIsY0FHQXJGLEVBQUFnRCxPQUFBNkIsRUFBQVAsRUFBQU0sRUFBQXFCLEtBS0EsU0FHQSxTQUFBNUMsSUFDQVAsRUFBQW9CLFVBQUFnQyxPQUFBLFVBL0pBLElBQUFGLEVBQWNyTCxFQUFRLEdBQ3RCbUssRUFBZW5LLEVBQVEsR0FrS3ZCLFNBQUFpTCxFQUFBWixFQUFBRCxHQUNBLElBQUFFLEVBQUEsR0FFQSxHQUFBRCxFQUFBRSxPQUFBLENBQ0FGLEVBQUFHLEtBQ0EsU0FBQUEsR0FDQUEsRUFBQUMsU0FBQUosRUFBQUksU0FDQUQsRUFBQUQsT0FBQSxLQUNBQyxFQUFBRSxZQUFBLE1BQ0FOLEVBQUEsS0FBQUksSUFFQSxTQUFBRyxHQUNBUCxFQUFBTyxVQUdHLEdBQUFOLEVBQUFLLFlBQUEsQ0FDSCxJQUFBRSxFQUFBUCxFQUFBUSxlQUNBQyxJQUdBLFNBQUFBLElBQ0FGLEVBQUFFLFlBQUEsU0FBQUMsR0FDQSxHQUFBQSxFQUFBbEYsT0FBQSxHQUNBeUUsSUFBQVUsT0FBQWpDLE1BQUFDLEtBQUErQixJQUNBRCxRQUNPLENBQ1BVLE9BS0EsU0FBQUEsSUFDQXJCLEVBQ0FHLEVBQUF4RSxJQUFBLFNBQUF1RSxHQUNBLGdCQUFBRCxHQUNBYSxFQUFBWixFQUFBRCxNQUdBLFNBQUFPLEVBQUFPLEdBQ0EsR0FBQVAsRUFBQSxDQUNBUCxFQUFBTyxPQUNTLENBQ1RPLEVBQUFDLEtBQUEsQ0FDQVYsU0FBQUosRUFBQUksU0FDQTlKLEtBQUEwSixFQUFBMUosS0FDQTRKLE9BQUEsTUFDQUcsWUFBQSxPQUVBTixFQUFBLEtBQUFjLHNDQ3JOQWxMLEVBQUFrQixFQUFBdUssR0FBQSxJQUFBQyxFQUFBMUwsRUFBQSxHQUFBMkwsRUFBQTNMLEVBQUE2QixFQUFBNkosR0FBQUUsRUFBQTVMLEVBQUEsR0FBQTZMLEVBQUE3TCxFQUFBNkIsRUFBQStKLEdBQUFFLEVBQUE5TCxFQUFBLEdBQUErTCxFQUFBL0wsRUFBQTZCLEVBQUFpSyxHQUlBLE1BQUFFLEVBQUEsSUFBbUJMLEVBQUFNLEVBQU0sa0RBQ3pCRCxFQUNBRSxPQUFBLEdBQ0FDLGNBQ0FDLE9BQ0FuRixPQUNBOEUsRUFBQUUsRUFBSzdJLEtBQUEsd0NBRUx5SSxJQUFRLGdCQUFBM0IsR0FDUixNQUFBTSxFQUFBTixFQUFBLEdBQ0FsRyxRQUFBQyxJQUFBLFlBQUF1RyxHQUNBLE1BQUFJLEVBQUEsSUFBQXhJLE9BQUFpSyxXQUNBekIsRUFBQXRHLGlCQUFBLE9BQUFqQyxJQUNBLE1BQUFpSyxFQUFBakssRUFBQWtLLE9BQUFDLE9BQ0FSLEVBQUFJLEtBQUFFLEdBQUFyRixPQUNJOEUsRUFBQUUsRUFBSzdJLGdCQUFpQm9ILEVBQUE3SixhQUUxQmlLLEVBQUF0RyxpQkFBQSxRQUFBcUcsSUFDQTNHLFFBQUF5SSxNQUFBLG1CQUFBOUIsR0FDSW9CLEVBQUFFLEVBQUs3SSxLQUFBLG1DQUVUd0gsRUFBQThCLGtCQUFBbEMsb0JDekJBckssRUFBQUQsUUFBQSxTQUFBeU0sRUFBQUMsR0FHQSxPQUZBQSxFQUFBLGlCQUFBQSxJQUFBQyxLQVdBLFNBQUFDLEVBQUFILEVBQUFqTSxHQUNBLE9BQUFpTSxFQUFBSSxPQUFBLFNBQUFDLEVBQUE3RCxHQUNBLE9BQUFKLE1BQUFrRSxRQUFBOUQsSUFBQXpJLEVBQUFrTSxFQUNBSSxFQUFBaEMsT0FBQThCLEVBQUEzRCxFQUFBekksRUFBQSxJQUdBc00sRUFBQWhDLE9BQUE3QixJQUVLLElBVkwyRCxDQUFBSCxFQUFBLEdBTkE1RCxNQUFBa0UsUUFBQU4sR0FDQUEsRUFBQTdHLElBQUEsU0FBQTFGLEdBQW1DLE9BQUFBLElBRW5DdU0scUJDUEEsU0FBQU8sR0FBQS9NLEVBQUFELFFBRUEsU0FBQWlOLEVBQUEvQyxHQUNBLElBQUFjLEVBQUFrQyxFQUFBeEgsRUFDQXlILEdBQUEsRUFFQXRFLE1BQUFrRSxRQUFBRSxJQUNBakMsRUFBQSxHQUNBa0MsRUFBQUQsRUFBQXRILFNBRUFELEVBQUE5RSxPQUFBOEUsS0FBQXVILEdBQ0FqQyxFQUFBLEdBQ0FrQyxFQUFBeEgsRUFBQUMsUUFHQSxTQUFBeUgsRUFBQTNDLEdBQ0EsU0FBQTRDLElBQ0FuRCxLQUFBTyxFQUFBTyxHQUNBZCxFQUFBLEtBRUFpRCxFQUFBSCxFQUFBTSxTQUFBRCxHQUNBQSxJQUdBLFNBQUFFLEVBQUFyTixFQUFBdUssRUFBQTZCLEdBQ0F0QixFQUFBOUssR0FBQW9NLEdBQ0EsS0FBQVksR0FBQXpDLElBQ0EyQyxFQUFBM0MsR0FJQXlDLEVBR0d4SCxFQUVIQSxFQUFBOEgsUUFBQSxTQUFBL0wsR0FDQXdMLEVBQUF4TCxHQUFBLFNBQUFnSixFQUFBNkIsR0FBeUNpQixFQUFBOUwsRUFBQWdKLEVBQUE2QixPQUl6Q1csRUFBQU8sUUFBQSxTQUFBQyxFQUFBdk4sR0FDQXVOLEVBQUEsU0FBQWhELEVBQUE2QixHQUFtQ2lCLEVBQUFyTixFQUFBdUssRUFBQTZCLE9BVG5DYyxFQUFBLE1BYUFELEdBQUEsb0NDN0NBLElBT0FPLEVBQ0FDLEVBUkFYLEVBQUEvTSxFQUFBRCxRQUFBLEdBVUEsU0FBQTROLElBQ0EsVUFBQTFGLE1BQUEsbUNBRUEsU0FBQTJGLElBQ0EsVUFBQTNGLE1BQUEscUNBc0JBLFNBQUE0RixFQUFBQyxHQUNBLEdBQUFMLElBQUFsSyxXQUVBLE9BQUFBLFdBQUF1SyxFQUFBLEdBR0EsSUFBQUwsSUFBQUUsSUFBQUYsSUFBQWxLLFdBRUEsT0FEQWtLLEVBQUFsSyxXQUNBQSxXQUFBdUssRUFBQSxHQUVBLElBRUEsT0FBQUwsRUFBQUssRUFBQSxHQUNLLE1BQUE1TCxHQUNMLElBRUEsT0FBQXVMLEVBQUFyTixLQUFBLEtBQUEwTixFQUFBLEdBQ1MsTUFBQTVMLEdBRVQsT0FBQXVMLEVBQUFyTixLQUFBb0MsS0FBQXNMLEVBQUEsTUF2Q0EsV0FDQSxJQUVBTCxFQURBLG1CQUFBbEssV0FDQUEsV0FFQW9LLEVBRUssTUFBQXpMLEdBQ0x1TCxFQUFBRSxFQUVBLElBRUFELEVBREEsbUJBQUFwRSxhQUNBQSxhQUVBc0UsRUFFSyxNQUFBMUwsR0FDTHdMLEVBQUFFLEdBakJBLEdBd0VBLElBRUFHLEVBRkFDLEVBQUEsR0FDQUMsR0FBQSxFQUVBQyxHQUFBLEVBRUEsU0FBQUMsSUFDQUYsR0FBQUYsSUFHQUUsR0FBQSxFQUNBRixFQUFBckksT0FDQXNJLEVBQUFELEVBQUFsRCxPQUFBbUQsR0FFQUUsR0FBQSxFQUVBRixFQUFBdEksUUFDQTBJLEtBSUEsU0FBQUEsSUFDQSxJQUFBSCxFQUFBLENBR0EsSUFBQTlGLEVBQUEwRixFQUFBTSxHQUNBRixHQUFBLEVBR0EsSUFEQSxJQUFBSSxFQUFBTCxFQUFBdEksT0FDQTJJLEdBQUEsQ0FHQSxJQUZBTixFQUFBQyxFQUNBQSxFQUFBLEtBQ0FFLEVBQUFHLEdBQ0FOLEdBQ0FBLEVBQUFHLEdBQUFJLE1BR0FKLEdBQUEsRUFDQUcsRUFBQUwsRUFBQXRJLE9BRUFxSSxFQUFBLEtBQ0FFLEdBQUEsRUFuRUEsU0FBQU0sR0FDQSxHQUFBYixJQUFBcEUsYUFFQSxPQUFBQSxhQUFBaUYsR0FHQSxJQUFBYixJQUFBRSxJQUFBRixJQUFBcEUsYUFFQSxPQURBb0UsRUFBQXBFLGFBQ0FBLGFBQUFpRixHQUVBLElBRUFiLEVBQUFhLEdBQ0ssTUFBQXJNLEdBQ0wsSUFFQSxPQUFBd0wsRUFBQXROLEtBQUEsS0FBQW1PLEdBQ1MsTUFBQXJNLEdBR1QsT0FBQXdMLEVBQUF0TixLQUFBb0MsS0FBQStMLEtBZ0RBQyxDQUFBckcsSUFpQkEsU0FBQXNHLEVBQUFYLEVBQUFZLEdBQ0FsTSxLQUFBc0wsTUFDQXRMLEtBQUFrTSxRQVlBLFNBQUFDLEtBNUJBNUIsRUFBQU0sU0FBQSxTQUFBUyxHQUNBLElBQUFjLEVBQUEsSUFBQWhHLE1BQUExRSxVQUFBd0IsT0FBQSxHQUNBLEdBQUF4QixVQUFBd0IsT0FBQSxFQUNBLFFBQUF6RixFQUFBLEVBQXVCQSxFQUFBaUUsVUFBQXdCLE9BQXNCekYsSUFDN0MyTyxFQUFBM08sRUFBQSxHQUFBaUUsVUFBQWpFLEdBR0ErTixFQUFBaEQsS0FBQSxJQUFBeUQsRUFBQVgsRUFBQWMsSUFDQSxJQUFBWixFQUFBdEksUUFBQXVJLEdBQ0FKLEVBQUFPLElBU0FLLEVBQUE1TSxVQUFBeU0sSUFBQSxXQUNBOUwsS0FBQXNMLElBQUF6SixNQUFBLEtBQUE3QixLQUFBa00sUUFFQTNCLEVBQUE4QixNQUFBLFVBQ0E5QixFQUFBK0IsU0FBQSxFQUNBL0IsRUFBQWdDLElBQUEsR0FDQWhDLEVBQUFpQyxLQUFBLEdBQ0FqQyxFQUFBa0MsUUFBQSxHQUNBbEMsRUFBQW1DLFNBQUEsR0FJQW5DLEVBQUFvQyxHQUFBUixFQUNBNUIsRUFBQXFDLFlBQUFULEVBQ0E1QixFQUFBc0MsS0FBQVYsRUFDQTVCLEVBQUF1QyxJQUFBWCxFQUNBNUIsRUFBQXdDLGVBQUFaLEVBQ0E1QixFQUFBeUMsbUJBQUFiLEVBQ0E1QixFQUFBMEMsS0FBQWQsRUFDQTVCLEVBQUEyQyxnQkFBQWYsRUFDQTVCLEVBQUE0QyxvQkFBQWhCLEVBRUE1QixFQUFBN0gsVUFBQSxTQUFBMUUsR0FBcUMsVUFFckN1TSxFQUFBNkMsUUFBQSxTQUFBcFAsR0FDQSxVQUFBeUgsTUFBQSxxQ0FHQThFLEVBQUE4QyxJQUFBLFdBQTJCLFdBQzNCOUMsRUFBQStDLE1BQUEsU0FBQUMsR0FDQSxVQUFBOUgsTUFBQSxtQ0FFQThFLEVBQUFpRCxNQUFBLFdBQTRCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbiIsIiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuc2ltcGxlVG9hc3Q9ZSgpOnQuc2ltcGxlVG9hc3Q9ZSgpfSh3aW5kb3csZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gbihvKXtpZihlW29dKXJldHVybiBlW29dLmV4cG9ydHM7dmFyIGk9ZVtvXT17aTpvLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbb10uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsbiksaS5sPSEwLGkuZXhwb3J0c31yZXR1cm4gbi5tPXQsbi5jPWUsbi5kPWZ1bmN0aW9uKHQsZSxvKXtuLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om99KX0sbi5yPWZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSxuLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIG4uZChlLFwiYVwiLGUpLGV9LG4ubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0sbi5wPVwiLi9kaXN0L1wiLG4obi5zPTApfShbZnVuY3Rpb24odCxlLG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPXtjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudCxlPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLG49dC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG89dGhpcy56SW5kZXh8fDFlMztuLmlubmVySFRNTD0nXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvYXN0LWNvbnRhaW5lclwiXFxuICAgICAgICAgICAgICAgIHN0eWxlPVwicG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHotaW5kZXg6ICcrbysnOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNSk7IGRpc3BsYXk6IG5vbmVcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvYXN0LWNvbnRlbnQtY29udGFpbmVyXCJcXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDUwJTsgbGVmdDogNTAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcIlxcbiAgICAgICAgICAgICAgICA+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPVwidG9hc3RDb250ZW50XCIgY2xhc3M9XCJ0b2FzdC1jb250ZW50XCIgc3R5bGU9XCJwYWRkaW5nOiA0cHggMTBweDsgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSA1MDBtcyBlYXNlLW91dCwgb3BhY2l0eSA1MDBtcyBlYXNlLW91dDsgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDUwMG1zIGVhc2Utb3V0LCBvcGFjaXR5IDUwMG1zIGVhc2Utb3V0OyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyBib3JkZXItcmFkaXVzOiA0cHg7IGNvbG9yOiAjZmZmO1wiXFxuICAgICAgICAgICAgICAgICAgICA+PC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgJyx0aGlzLnRvYXN0PW4uY2hpbGRyZW5bMF0sZS5hcHBlbmRDaGlsZCh0aGlzLnRvYXN0KSx0LmJvZHkuYXBwZW5kQ2hpbGQoZSl9LHNldFpJbmRleDpmdW5jdGlvbih0KXt0aGlzLnpJbmRleD10LHRoaXMudG9hc3QmJih0aGlzLnRvYXN0LnN0eWxlLnpJbmRleD10KX0sc2hvdzpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dGhpcy50b2FzdHx8dGhpcy5jcmVhdGUoKTt2YXIgbz10aGlzLnRvYXN0LGk9by5vd25lckRvY3VtZW50LHM9aS5nZXRFbGVtZW50QnlJZChcInRvYXN0Q29udGVudFwiKTtzLmlubmVySFRNTD1cIlwiLHMuYXBwZW5kQ2hpbGQoaS5jcmVhdGVUZXh0Tm9kZSh0KSksdGhpcy5wbGF5U2hvd0FuaW0ocyksby5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIG4uaGlkZSgpfSxlfHwyZTMpfSxwbGF5U2hvd0FuaW06ZnVuY3Rpb24odCl7dC5zdHlsZS50cmFuc2Zvcm09XCJ0cmFuc2xhdGVZKC00MHB4KVwiLHQuc3R5bGUud2Via2l0VHJhbnNmb3JtPVwidHJhbnNsYXRlWSgtNDBweClcIix0LnN0eWxlLm9wYWNpdHk9MCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5zdHlsZS50cmFuc2Zvcm09XCJ0cmFuc2xhdGVZKDBweClcIix0LnN0eWxlLndlYmtpdFRyYW5zZm9ybT1cInRyYW5zbGF0ZVkoMHB4KVwiLHQuc3R5bGUub3BhY2l0eT0xfSl9LGhpZGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy50b2FzdC5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9hc3RDb250ZW50XCIpO3RoaXMucGxheUhpZGVBbmltKGUpO3ZhciBuPWZ1bmN0aW9uKCl7Y29uc29sZS5sb2coXCJpbiBhZnRlciBhbmltXCIpLHQudG9hc3Quc3R5bGUuZGlzcGxheT1cIm5vbmVcIn07ZS5zdHlsZS50cmFuc2l0aW9uP3RoaXMuYWRkT25jZUV2ZW50KGUsXCJ0cmFuc2l0aW9uZW5kXCIsbik6ZS5zdHlsZS53ZWJraXRUcmFuc2l0aW9uP3RoaXMuYWRkT25jZUV2ZW50KGUsXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsbik6bigpfSxhZGRPbmNlRXZlbnQ6ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXMsaT1hcmd1bWVudHM7dC5hZGRFdmVudExpc3RlbmVyKGUsZnVuY3Rpb24gcygpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHMpLG4uYXBwbHkobyxpKX0pfSxwbGF5SGlkZUFuaW06ZnVuY3Rpb24odCl7dC5zdHlsZS50cmFuc2Zvcm09XCJ0cmFuc2xhdGVZKDEwcHgpXCIsdC5zdHlsZS53ZWJraXRUcmFuc2Zvcm09XCJ0cmFuc2xhdGVZKDEwcHgpXCIsdC5zdHlsZS5vcGFjaXR5PTB9fTtlLmRlZmF1bHQ9b31dKX0pOyIsIm1vZHVsZS5leHBvcnRzID0gY2xhc3MgUGxheWVyIHtcbiAgY29uc3RydWN0b3IgKHNyYywgZGVidWdTdGF0ZSA9IGZhbHNlKSB7XG4gICAgdGhpcy5zcmMgPSBzcmNcbiAgICB0aGlzLmNvbnRleHQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKVxuICAgIHRoaXMubG9hZGVkID0gZmFsc2VcbiAgICB0aGlzLmJ1ZmZlciA9IG51bGxcbiAgICB0aGlzLnNvdXJjZSA9IG51bGxcbiAgICB0aGlzLmRlYnVnU3RhdGUgPSBkZWJ1Z1N0YXRlXG4gICAgdGhpcy5zdGFydGVkQXQgPSAwXG4gICAgdGhpcy5vZmZzZXQgPSAwXG4gICAgdGhpcy5sb29wU3RhdGUgPSBmYWxzZVxuICAgIHRoaXMubGlzdGVuZXJzID0ge31cbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZVxuXG4gICAgdGhpcy5pbml0U291cmNlKClcbiAgfVxuXG4gIGluaXRTb3VyY2UgKCkge1xuICAgIHRoaXMuc291cmNlID0gdGhpcy5jb250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpXG4gICAgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmNvbnRleHQuZGVzdGluYXRpb24pXG5cbiAgICAvLyBBZGQgc2V0IGV2ZW50IGxpc3RlbmVycyB0byBuZXcgc291cmNlLlxuICAgIGNvbnN0IGV2ZW50cyA9IE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKVxuICAgIGlmICghZXZlbnRzLmxlbmd0aCkgcmV0dXJuXG4gICAgZXZlbnRzLm1hcChldmVudE5hbWUgPT4ge1xuICAgICAgdGhpcy5sb2coYFJlLWFkZCBldmVudDogJHtldmVudE5hbWV9YClcbiAgICAgIHRoaXMuc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdKVxuICAgIH0pXG4gIH1cblxuICBjbGVhclNvdXJjZSAoKSB7XG4gICAgaWYgKCF0aGlzLnNvdXJjZSkgcmV0dXJuXG4gICAgaWYgKHRoaXMucGxheWluZykgdGhpcy5zb3VyY2Uuc3RvcCgpXG4gICAgdGhpcy5zb3VyY2UuZGlzY29ubmVjdCgpXG4gICAgdGhpcy5pbml0U291cmNlKClcbiAgfVxuXG4gIHN0b3AgKCkge1xuICAgIGlmICghdGhpcy5wbGF5aW5nKSByZXR1cm5cbiAgICB0aGlzLmNsZWFyU291cmNlKClcbiAgICB0aGlzLnN0YXJ0ZWRBdCA9IDBcbiAgICB0aGlzLm9mZnNldCA9IDBcbiAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZVxuICAgIHRoaXMubG9nKCdTdG9wcGVkLicpXG4gIH1cblxuICBsb2FkIChzcmMpIHtcbiAgICBzcmMgPSBzcmMgfHwgdGhpcy5zcmNcbiAgICB0aGlzLmxvZygnTG9hZGluZycsIHNyYylcbiAgICBpZiAodGhpcy5sb2FkZWQpIHtcbiAgICAgIHRoaXMuY2xlYXJTb3VyY2UoKVxuICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc3JjICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5mZXRjaGVyID0gdGhpcy5jb250ZXh0LmRlY29kZUF1ZGlvRGF0YShzcmMpLnRoZW4oYXVkaW9CdWZmZXIgPT4ge1xuICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWVcbiAgICAgICAgdGhpcy5idWZmZXIgPSBhdWRpb0J1ZmZlclxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgdGhpcy5mZXRjaGVyID0gd2luZG93XG4gICAgICAuZmV0Y2goc3JjLCB7IG1ldGhvZDogJ0dFVCcsIG1vZGU6ICduby1jb3JzJyB9KVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYXJyYXlCdWZmZXIoKSlcbiAgICAgIC50aGVuKGFycmF5QnVmZmVyID0+IHRoaXMuY29udGV4dC5kZWNvZGVBdWRpb0RhdGEoYXJyYXlCdWZmZXIpKVxuICAgICAgLnRoZW4oYXVkaW9CdWZmZXIgPT4ge1xuICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWVcbiAgICAgICAgdGhpcy5idWZmZXIgPSBhdWRpb0J1ZmZlclxuICAgICAgfSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgZ2V0UGxheVRpbWUgKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQuY3VycmVudFRpbWUgLSB0aGlzLnN0YXJ0ZWRBdCArIHRoaXMub2Zmc2V0XG4gIH1cblxuICBwbGF5IChvZmZzZXQpIHtcbiAgICBpZiAodGhpcy5jb250ZXh0LnN0YXRlID09PSAnc3VzcGVuZGVkJykge1xuICAgICAgdGhpcy5jb250ZXh0LnJlc3VtZSgpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubG9hZGVkKSB7XG4gICAgICB0aGlzLmxvZygnV2FpdGluZyBmb3IgYnVmZmVyIHRvIGxvYWQuLi4nKVxuICAgICAgdGhpcy5mZXRjaGVyLnRoZW4oKCkgPT4gdGhpcy5wbGF5KCkpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zb3VyY2UuYnVmZmVyKSByZXR1cm5cblxuICAgIHRoaXMuc291cmNlLmJ1ZmZlciA9IHRoaXMuYnVmZmVyXG4gICAgdGhpcy5zb3VyY2UubG9vcEVuZCA9IHRoaXMuYnVmZmVyLmR1cmF0aW9uXG4gICAgdGhpcy5zb3VyY2UubG9vcCA9IHRoaXMubG9vcFN0YXRlXG4gICAgdGhpcy5zdGFydGVkQXQgPSB0aGlzLmNvbnRleHQuY3VycmVudFRpbWVcbiAgICB0aGlzLnNvdXJjZS5zdGFydCgwLCBvZmZzZXQpXG4gICAgdGhpcy5wbGF5aW5nID0gdHJ1ZVxuICAgIHRoaXMuc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgKCkgPT4gdGhpcy5zdG9wKCkpIC8vIFNvIHdlIGNhbiByZXN0YXJ0IHBsYXliYWNrLlxuICAgIHRoaXMubG9nKCdQbGF5aW5nLi4uJylcbiAgfVxuXG4gIHBhdXNlICgpIHtcbiAgICB0aGlzLmNvbnRleHQuc3VzcGVuZCgpXG4gICAgdGhpcy5wbGF5aW5nID0gZmFsc2VcbiAgICB0aGlzLmxvZygnUGF1c2VkLicpXG4gIH1cblxuICBsb29wIChsb29wU3RhdGUpIHtcbiAgICB0aGlzLmxvb3BTdGF0ZSA9IGxvb3BTdGF0ZVxuICAgIHRoaXMubG9nKCdMb29wOicsIGxvb3BTdGF0ZSA/ICdPTicgOiAnT0ZGJylcbiAgICB0aGlzLnNvdXJjZS5sb29wID0gbG9vcFN0YXRlXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHRvZ2dsZUxvb3AgKCkge1xuICAgIHRoaXMubG9vcFN0YXRlID0gIXRoaXMubG9vcFN0YXRlXG4gICAgdGhpcy5sb2coJ1RvZ2dsZSBsb29wOicsIHRoaXMubG9vcFN0YXRlID8gJ09OJyA6ICdPRkYnKVxuICAgIHRoaXMuc291cmNlLmxvb3AgPSB0aGlzLmxvb3BTdGF0ZVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBmb3J3YXJkIChzZWNvbmRzID0gNSkge1xuICAgIHRoaXMubG9nKGA+PiBGb3J3YXJkICR7c2Vjb25kc30gc2Vjb25kc2ApXG4gICAgY29uc3QgcGxheVRpbWUgPSB0aGlzLmdldFBsYXlUaW1lKClcbiAgICB0aGlzLm9mZnNldCA9IHBsYXlUaW1lICsgc2Vjb25kc1xuICAgIGlmICh0aGlzLm9mZnNldCA+IHRoaXMuYnVmZmVyLmR1cmF0aW9uKSB0aGlzLm9mZnNldCA9IHRoaXMuYnVmZmVyLmR1cmF0aW9uIC0gc2Vjb25kc1xuICAgIHRoaXMubG9nKCdQbGF5IEAnLCB0aGlzLm9mZnNldClcbiAgICB0aGlzLmNsZWFyU291cmNlKClcbiAgICB0aGlzLnBsYXkodGhpcy5vZmZzZXQpXG4gIH1cblxuICByZXdpbmQgKHNlY29uZHMgPSA1KSB7XG4gICAgdGhpcy5sb2coYDw8IFJld2luZCAke3NlY29uZHN9IHNlY29uZHNgKVxuICAgIGNvbnN0IHBsYXlUaW1lID0gdGhpcy5nZXRQbGF5VGltZSgpXG4gICAgdGhpcy5vZmZzZXQgPSBwbGF5VGltZSAtIHNlY29uZHNcbiAgICBpZiAodGhpcy5vZmZzZXQgPCAwKSB0aGlzLm9mZnNldCA9IDBcbiAgICB0aGlzLmxvZygnUGxheSBAJywgdGhpcy5vZmZzZXQpXG4gICAgdGhpcy5jbGVhclNvdXJjZSgpXG4gICAgdGhpcy5wbGF5KHRoaXMub2Zmc2V0KVxuICB9XG5cbiAgdXNlS2V5Ym9hcmQgKHNlbGVjdG9yKSB7XG4gICAgdGhpcy5sb2coJ1VzaW5nIGtleWJvYXJkLicpXG4gICAgbGV0ICRlbCA9IGRvY3VtZW50LmJvZHlcbiAgICBpZiAoc2VsZWN0b3IpICRlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoeyBrZXkgfSkgPT4ge1xuICAgICAgY29uc3Qga2V5TWFwID0ge1xuICAgICAgICBBcnJvd1JpZ2h0OiAoKSA9PiB0aGlzLmZvcndhcmQoKSxcbiAgICAgICAgQXJyb3dMZWZ0OiAoKSA9PiB0aGlzLnJld2luZCgpLFxuICAgICAgICB6OiAoKSA9PiB0aGlzLnN0b3AoKSxcbiAgICAgICAgeDogKCkgPT4gdGhpcy5wbGF5KCksXG4gICAgICAgIGM6ICgpID0+IHRoaXMucGF1c2UoKSxcbiAgICAgICAgbDogKCkgPT4gdGhpcy50b2dnbGVMb29wKClcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWV0aG9kID0ga2V5TWFwW2tleV1cbiAgICAgIGlmIChtZXRob2QpIG1ldGhvZCgpXG4gICAgfSlcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICB0aGlzLnNvdXJjZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2spXG4gICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXSA9IGNhbGxiYWNrXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIGRlYnVnIChkZWJ1Z1N0YXRlKSB7XG4gICAgdGhpcy5kZWJ1Z1N0YXRlID0gZGVidWdTdGF0ZVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBsb2cgKCkge1xuICAgIGlmICghdGhpcy5kZWJ1Z1N0YXRlKSByZXR1cm5cbiAgICBjb25zb2xlLmxvZygnUGxheWVyOicsIC4uLmFyZ3VtZW50cylcbiAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBkcmFnRHJvcFxuXG52YXIgZmxhdHRlbiA9IHJlcXVpcmUoJ2ZsYXR0ZW4nKVxudmFyIHBhcmFsbGVsID0gcmVxdWlyZSgncnVuLXBhcmFsbGVsJylcblxuZnVuY3Rpb24gZHJhZ0Ryb3AgKGVsZW0sIGxpc3RlbmVycykge1xuICBpZiAodHlwZW9mIGVsZW0gPT09ICdzdHJpbmcnKSB7XG4gICAgdmFyIHNlbGVjdG9yID0gZWxlbVxuICAgIGVsZW0gPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtKVxuICAgIGlmICghZWxlbSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyBzZWxlY3RvciArICdcIiBkb2VzIG5vdCBtYXRjaCBhbnkgSFRNTCBlbGVtZW50cycpXG4gICAgfVxuICB9XG5cbiAgaWYgKCFlbGVtKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyBlbGVtICsgJ1wiIGlzIG5vdCBhIHZhbGlkIEhUTUwgZWxlbWVudCcpXG4gIH1cblxuICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGxpc3RlbmVycyA9IHsgb25Ecm9wOiBsaXN0ZW5lcnMgfVxuICB9XG5cbiAgdmFyIHRpbWVvdXRcblxuICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbnRlcicsIG9uRHJhZ0VudGVyLCBmYWxzZSlcbiAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIG9uRHJhZ092ZXIsIGZhbHNlKVxuICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIG9uRHJhZ0xlYXZlLCBmYWxzZSlcbiAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgb25Ecm9wLCBmYWxzZSlcblxuICAvLyBGdW5jdGlvbiB0byByZW1vdmUgZHJhZy1kcm9wIGxpc3RlbmVyc1xuICByZXR1cm4gZnVuY3Rpb24gcmVtb3ZlICgpIHtcbiAgICByZW1vdmVEcmFnQ2xhc3MoKVxuICAgIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VudGVyJywgb25EcmFnRW50ZXIsIGZhbHNlKVxuICAgIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCBvbkRyYWdPdmVyLCBmYWxzZSlcbiAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsIG9uRHJhZ0xlYXZlLCBmYWxzZSlcbiAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCBvbkRyb3AsIGZhbHNlKVxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnRW50ZXIgKGUpIHtcbiAgICBpZiAobGlzdGVuZXJzLm9uRHJhZ0VudGVyKSB7XG4gICAgICBsaXN0ZW5lcnMub25EcmFnRW50ZXIoZSlcbiAgICB9XG5cbiAgICAvLyBQcmV2ZW50IGV2ZW50XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnT3ZlciAoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBlLnByZXZlbnREZWZhdWx0KClcblxuICAgIGlmIChsaXN0ZW5lcnMub25EcmFnT3Zlcikge1xuICAgICAgbGlzdGVuZXJzLm9uRHJhZ092ZXIoZSlcbiAgICB9XG5cbiAgICBpZiAoZS5kYXRhVHJhbnNmZXIuaXRlbXMpIHtcbiAgICAgIC8vIE9ubHkgYWRkIFwiZHJhZ1wiIGNsYXNzIHdoZW4gYGl0ZW1zYCBjb250YWlucyBpdGVtcyB0aGF0IGFyZSBhYmxlIHRvIGJlXG4gICAgICAvLyBoYW5kbGVkIGJ5IHRoZSByZWdpc3RlcmVkIGxpc3RlbmVycyAoZmlsZXMgdnMuIHRleHQpXG4gICAgICB2YXIgaXRlbXMgPSBBcnJheS5mcm9tKGUuZGF0YVRyYW5zZmVyLml0ZW1zKVxuICAgICAgdmFyIGZpbGVJdGVtcyA9IGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS5raW5kID09PSAnZmlsZSdcbiAgICAgIH0pXG4gICAgICB2YXIgdGV4dEl0ZW1zID0gaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmtpbmQgPT09ICdzdHJpbmcnXG4gICAgICB9KVxuXG4gICAgICBpZiAoZmlsZUl0ZW1zLmxlbmd0aCA9PT0gMCAmJiAhbGlzdGVuZXJzLm9uRHJvcFRleHQpIHJldHVyblxuICAgICAgaWYgKHRleHRJdGVtcy5sZW5ndGggPT09IDAgJiYgIWxpc3RlbmVycy5vbkRyb3ApIHJldHVyblxuICAgICAgaWYgKGZpbGVJdGVtcy5sZW5ndGggPT09IDAgJiYgdGV4dEl0ZW1zLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG4gICAgfVxuXG4gICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdkcmFnJylcbiAgICBjbGVhclRpbWVvdXQodGltZW91dClcblxuICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnY29weSdcblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZnVuY3Rpb24gb25EcmFnTGVhdmUgKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZiAobGlzdGVuZXJzLm9uRHJhZ0xlYXZlKSB7XG4gICAgICBsaXN0ZW5lcnMub25EcmFnTGVhdmUoZSlcbiAgICB9XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChyZW1vdmVEcmFnQ2xhc3MsIDUwKVxuXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBmdW5jdGlvbiBvbkRyb3AgKGUpIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZiAobGlzdGVuZXJzLm9uRHJhZ0xlYXZlKSB7XG4gICAgICBsaXN0ZW5lcnMub25EcmFnTGVhdmUoZSlcbiAgICB9XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICByZW1vdmVEcmFnQ2xhc3MoKVxuXG4gICAgdmFyIHBvcyA9IHtcbiAgICAgIHg6IGUuY2xpZW50WCxcbiAgICAgIHk6IGUuY2xpZW50WVxuICAgIH1cblxuICAgIC8vIHRleHQgZHJvcCBzdXBwb3J0XG4gICAgdmFyIHRleHQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0JylcbiAgICBpZiAodGV4dCAmJiBsaXN0ZW5lcnMub25Ecm9wVGV4dCkge1xuICAgICAgbGlzdGVuZXJzLm9uRHJvcFRleHQodGV4dCwgcG9zKVxuICAgIH1cblxuICAgIC8vIEZpbGUgZHJvcCBzdXBwb3J0LiBUaGUgYGRhdGFUcmFuc2Zlci5pdGVtc2AgQVBJIHN1cHBvcnRzIGRpcmVjdG9yaWVzLCBzbyB3ZVxuICAgIC8vIHVzZSBpdCBpbnN0ZWFkIG9mIGBkYXRhVHJhbnNmZXIuZmlsZXNgLCBldmVuIHRob3VnaCBpdCdzIG11Y2ggbW9yZVxuICAgIC8vIGNvbXBsaWNhdGVkIHRvIHVzZS5cbiAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvZHJhZy1kcm9wL2lzc3Vlcy8zOVxuICAgIGlmIChsaXN0ZW5lcnMub25Ecm9wICYmIGUuZGF0YVRyYW5zZmVyLml0ZW1zKSB7XG4gICAgICB2YXIgZmlsZUxpc3QgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1xuXG4gICAgICAvLyBIYW5kbGUgZGlyZWN0b3JpZXMgaW4gQ2hyb21lIHVzaW5nIHRoZSBwcm9wcmlldGFyeSBGaWxlU3lzdGVtIEFQSVxuICAgICAgdmFyIGl0ZW1zID0gQXJyYXkuZnJvbShlLmRhdGFUcmFuc2Zlci5pdGVtcykuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmtpbmQgPT09ICdmaWxlJ1xuICAgICAgfSlcblxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgICAgIHBhcmFsbGVsKFxuICAgICAgICBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICBwcm9jZXNzRW50cnkoaXRlbS53ZWJraXRHZXRBc0VudHJ5KCksIGNiKVxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIGZ1bmN0aW9uIChlcnIsIHJlc3VsdHMpIHtcbiAgICAgICAgICAvLyBUaGlzIGNhdGNoZXMgcGVybWlzc2lvbiBlcnJvcnMgd2l0aCBmaWxlOi8vIGluIENocm9tZS4gVGhpcyBzaG91bGQgbmV2ZXJcbiAgICAgICAgICAvLyB0aHJvdyBpbiBwcm9kdWN0aW9uIGNvZGUsIHNvIHRoZSB1c2VyIGRvZXMgbm90IG5lZWQgdG8gdXNlIHRyeS1jYXRjaC5cbiAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnJcblxuICAgICAgICAgIHZhciBlbnRyaWVzID0gZmxhdHRlbihyZXN1bHRzKVxuXG4gICAgICAgICAgdmFyIGZpbGVzID0gZW50cmllcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLmlzRmlsZVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICB2YXIgZGlyZWN0b3JpZXMgPSBlbnRyaWVzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaXNEaXJlY3RvcnlcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgbGlzdGVuZXJzLm9uRHJvcChmaWxlcywgcG9zLCBmaWxlTGlzdCwgZGlyZWN0b3JpZXMpXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZURyYWdDbGFzcyAoKSB7XG4gICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnJylcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzRW50cnkgKGVudHJ5LCBjYikge1xuICB2YXIgZW50cmllcyA9IFtdXG5cbiAgaWYgKGVudHJ5LmlzRmlsZSkge1xuICAgIGVudHJ5LmZpbGUoXG4gICAgICBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICBmaWxlLmZ1bGxQYXRoID0gZW50cnkuZnVsbFBhdGggLy8gcHJlc2VydmUgcGF0aGluZyBmb3IgY29uc3VtZXJcbiAgICAgICAgZmlsZS5pc0ZpbGUgPSB0cnVlXG4gICAgICAgIGZpbGUuaXNEaXJlY3RvcnkgPSBmYWxzZVxuICAgICAgICBjYihudWxsLCBmaWxlKVxuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgY2IoZXJyKVxuICAgICAgfVxuICAgIClcbiAgfSBlbHNlIGlmIChlbnRyeS5pc0RpcmVjdG9yeSkge1xuICAgIHZhciByZWFkZXIgPSBlbnRyeS5jcmVhdGVSZWFkZXIoKVxuICAgIHJlYWRFbnRyaWVzKClcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRFbnRyaWVzICgpIHtcbiAgICByZWFkZXIucmVhZEVudHJpZXMoZnVuY3Rpb24gKGVudHJpZXNfKSB7XG4gICAgICBpZiAoZW50cmllc18ubGVuZ3RoID4gMCkge1xuICAgICAgICBlbnRyaWVzID0gZW50cmllcy5jb25jYXQoQXJyYXkuZnJvbShlbnRyaWVzXykpXG4gICAgICAgIHJlYWRFbnRyaWVzKCkgLy8gY29udGludWUgcmVhZGluZyBlbnRyaWVzIHVudGlsIGByZWFkRW50cmllc2AgcmV0dXJucyBubyBtb3JlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb25lRW50cmllcygpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGRvbmVFbnRyaWVzICgpIHtcbiAgICBwYXJhbGxlbChcbiAgICAgIGVudHJpZXMubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgcHJvY2Vzc0VudHJ5KGVudHJ5LCBjYilcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBmdW5jdGlvbiAoZXJyLCByZXN1bHRzKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBjYihlcnIpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgIGZ1bGxQYXRoOiBlbnRyeS5mdWxsUGF0aCxcbiAgICAgICAgICAgIG5hbWU6IGVudHJ5Lm5hbWUsXG4gICAgICAgICAgICBpc0ZpbGU6IGZhbHNlLFxuICAgICAgICAgICAgaXNEaXJlY3Rvcnk6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNiKG51bGwsIHJlc3VsdHMpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCBQbGF5ZXIgZnJvbSAndXBsYXllcidcbmltcG9ydCBkcmFnRHJvcCBmcm9tICdkcmFnLWRyb3AnXG5pbXBvcnQgdG9hc3QgZnJvbSAnanMtc2ltcGxlLXRvYXN0J1xuXG5jb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCdodHRwczovL3BsYXktc3BlY3RydW0uaGVyb2t1YXBwLmNvbS9kZXBsb3kubXAzJylcbnBsYXllclxuICAuZGVidWcodHJ1ZSlcbiAgLnVzZUtleWJvYXJkKClcbiAgLmxvYWQoKVxuICAucGxheSgpXG50b2FzdC5zaG93KCdEcm9wIGFuIGF1ZGlvIGZpbGUgdG8gc3RhcnQgcGxheWluZyEnKVxuXG5kcmFnRHJvcCgnYm9keScsIGZ1bmN0aW9uIChmaWxlcykge1xuICBjb25zdCBmaWxlID0gZmlsZXNbMF1cbiAgY29uc29sZS5sb2coJ0dPVCBGSUxFOicsIGZpbGUpXG4gIGNvbnN0IHJlYWRlciA9IG5ldyB3aW5kb3cuRmlsZVJlYWRlcigpXG4gIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IGUudGFyZ2V0LnJlc3VsdFxuICAgIHBsYXllci5sb2FkKGRhdGEpLnBsYXkoKVxuICAgIHRvYXN0LnNob3coYFBsYXlpbmcgJHtmaWxlLm5hbWV9Li4uYClcbiAgfSlcbiAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyID0+IHtcbiAgICBjb25zb2xlLmVycm9yKCdGaWxlUmVhZGVyIGVycm9yJyArIGVycilcbiAgICB0b2FzdC5zaG93KCdPb3BzISBTb21ldGhpbmcgd2VudCB3cm9uZyA6KCcpXG4gIH0pXG4gIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKVxufSlcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZmxhdHRlbihsaXN0LCBkZXB0aCkge1xuICBkZXB0aCA9ICh0eXBlb2YgZGVwdGggPT0gJ251bWJlcicpID8gZGVwdGggOiBJbmZpbml0eTtcblxuICBpZiAoIWRlcHRoKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobGlzdCkpIHtcbiAgICAgIHJldHVybiBsaXN0Lm1hcChmdW5jdGlvbihpKSB7IHJldHVybiBpOyB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3Q7XG4gIH1cblxuICByZXR1cm4gX2ZsYXR0ZW4obGlzdCwgMSk7XG5cbiAgZnVuY3Rpb24gX2ZsYXR0ZW4obGlzdCwgZCkge1xuICAgIHJldHVybiBsaXN0LnJlZHVjZShmdW5jdGlvbiAoYWNjLCBpdGVtKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBkIDwgZGVwdGgpIHtcbiAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoX2ZsYXR0ZW4oaXRlbSwgZCArIDEpKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChpdGVtKTtcbiAgICAgIH1cbiAgICB9LCBbXSk7XG4gIH1cbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJ1blBhcmFsbGVsXG5cbmZ1bmN0aW9uIHJ1blBhcmFsbGVsICh0YXNrcywgY2IpIHtcbiAgdmFyIHJlc3VsdHMsIHBlbmRpbmcsIGtleXNcbiAgdmFyIGlzU3luYyA9IHRydWVcblxuICBpZiAoQXJyYXkuaXNBcnJheSh0YXNrcykpIHtcbiAgICByZXN1bHRzID0gW11cbiAgICBwZW5kaW5nID0gdGFza3MubGVuZ3RoXG4gIH0gZWxzZSB7XG4gICAga2V5cyA9IE9iamVjdC5rZXlzKHRhc2tzKVxuICAgIHJlc3VsdHMgPSB7fVxuICAgIHBlbmRpbmcgPSBrZXlzLmxlbmd0aFxuICB9XG5cbiAgZnVuY3Rpb24gZG9uZSAoZXJyKSB7XG4gICAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICAgIGlmIChjYikgY2IoZXJyLCByZXN1bHRzKVxuICAgICAgY2IgPSBudWxsXG4gICAgfVxuICAgIGlmIChpc1N5bmMpIHByb2Nlc3MubmV4dFRpY2soZW5kKVxuICAgIGVsc2UgZW5kKClcbiAgfVxuXG4gIGZ1bmN0aW9uIGVhY2ggKGksIGVyciwgcmVzdWx0KSB7XG4gICAgcmVzdWx0c1tpXSA9IHJlc3VsdFxuICAgIGlmICgtLXBlbmRpbmcgPT09IDAgfHwgZXJyKSB7XG4gICAgICBkb25lKGVycilcbiAgICB9XG4gIH1cblxuICBpZiAoIXBlbmRpbmcpIHtcbiAgICAvLyBlbXB0eVxuICAgIGRvbmUobnVsbClcbiAgfSBlbHNlIGlmIChrZXlzKSB7XG4gICAgLy8gb2JqZWN0XG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHRhc2tzW2tleV0oZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7IGVhY2goa2V5LCBlcnIsIHJlc3VsdCkgfSlcbiAgICB9KVxuICB9IGVsc2Uge1xuICAgIC8vIGFycmF5XG4gICAgdGFza3MuZm9yRWFjaChmdW5jdGlvbiAodGFzaywgaSkge1xuICAgICAgdGFzayhmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHsgZWFjaChpLCBlcnIsIHJlc3VsdCkgfSlcbiAgICB9KVxuICB9XG5cbiAgaXNTeW5jID0gZmFsc2Vcbn1cbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iXSwic291cmNlUm9vdCI6IiJ9